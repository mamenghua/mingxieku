"use strict";function draw(a){var o="",t=a.width(),n=a.height(),r=a[0],e=r.getContext("2d");r.width=t,r.height=n;for(var l="A,B,C,E,F,G,H,J,K,L,M,N,P,Q,R,S,T,W,X,Y,Z,1,2,3,4,5,6,7,8,9,0".split(","),h=l.length,i=0;i<=3;i++){var d=Math.floor(Math.random()*h),s=10*Math.random()*Math.PI/180,c=l[d];o+=c.toLowerCase();var m=4+13*i,$=15;e.font="bold 16px 微软雅黑",e.translate(m,$),e.rotate(s),e.fillStyle="rgb(0,0,0)",e.fillText(c,0,0),e.rotate(-s),e.translate(-m,-$)}console.log(o);for(i=0;i<=2;i++)e.strokeStyle=randomColor(),e.beginPath(),e.moveTo(Math.random()*t,Math.random()*n),e.lineTo(Math.random()*t,Math.random()*n),e.stroke();for(i=0;i<=30;i++){e.strokeStyle=randomColor(),e.beginPath();m=Math.random()*t,$=Math.random()*n;e.moveTo(m,$),e.lineTo(m+1,$+1),e.stroke()}return o}function randomColor(){return"rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"}$(function(){var o="";o=draw($("#canvas")),$(".change").on("click",function(){o=draw($("#canvas"))}),$loginBtn=$("#loginBtn"),$loginBtn.on("click",function(a){if($name=$("#name").val(),$password=$("#password").val(),$yanzheng_input=$(".yanzheng_input").val(),$yanzheng_input!=o)return alert("验证码错误!"),$(".yanzheng_input").val(""),void(o=draw($("#canvas")));$.ajax({type:"post",url:"http://47.104.244.134:8080/userlogin.do",data:{name:$name,password:$password},success:function(a){console.log(a),"0"==a.code?($.cookie("token",a.data.token,{path:"/",expires:7}),alert("登录成功"),location.href="../index.html"):alert("用户名或密码错误")}})})});